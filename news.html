<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Official News Feed</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
/* =====  YOUR EXACT TOKENS  ===== */
:root{
  --bg:#000;
  --card:#0a0a0a;
  --border:#222;
  --accent:#dc143c;
  --text:#fff;
  --sub:#aaa;
  --gap:1.2rem;
  font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
}
* {box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column}
a{color:var(--accent);text-decoration:none}
header,footer{background:var(--card);border-bottom:2px solid var(--accent)}
header{display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem}
header h1{margin:0;font-size:1.6rem;letter-spacing:1px}
header span{font-weight:300;font-size:.9rem;color:var(--sub)}
main{flex:1;padding:2rem;max-width:1100px;margin:auto;width:100%}
button{cursor:pointer;border:none;border-radius:4px;padding:.5rem .9rem;font-weight:600;background:var(--accent);color:#fff}
button:disabled{opacity:.45;cursor:not-allowed}
small{color:var(--sub)}
/* =====  FEED STYLES  ===== */
.feed-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem}
.feed-header h2{margin:0}
#backToIndex{background:#333}
#newPostBtn{background:#0c0}
#adminBadge{display:none;background:#ff0;color:#000;padding:.2rem .5rem;border-radius:4px;font-size:.7rem;margin-left:.5rem}
/* NEW-POST COMPOSER */
.composer{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:1rem;margin-bottom:1.5rem;display:none}
.composer.active{display:block}
.composer .toolbar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:.5rem}
.composer input[type=color],
.composer select,
.composer input[type=file]{padding:.3rem;font-size:.8rem;background:#222;color:var(--text);border:1px solid #444;border-radius:4px}
.composer textarea{width:100%;min-height:100px;padding:.6rem;background:#222;color:var(--text);border:1px solid #444;border-radius:4px;resize:vertical;font-family:inherit}
.composer .preview{max-width:100%;max-height:200px;border-radius:4px;margin-top:.5rem}
/* POST CARD */
.post{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:1rem;margin-bottom:1.2rem;position:relative}
.post .head{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}
.post .head .avatar{width:36px;height:36px;border-radius:50%;background:var(--accent);display:grid;place-items:center;font-weight:700;font-size:1rem}
.post .meta{font-size:.75rem;color:var(--sub)}
.post .body{margin:.7rem 0;white-space:pre-wrap;word-break:break-word}
.post .body img,.post .body video{max-width:100%;border-radius:6px;margin-top:.5rem}
.post .actions{display:flex;align-items:center;gap:1rem;font-size:.85rem;margin-top:.5rem}
.post .actions span{cursor:pointer}
.post .actions .liked{color:#ff1744}
.post .actions .disliked{color:#3b82f6}
/* ADMIN ONLY */
.post .adminMenu{position:absolute;top:.5rem;right:.5rem;font-size:.9rem;cursor:pointer}
/* SHARE POPUP */
.sharePop{display:none;position:absolute;background:#1b1b1b;border:1px solid #444;border-radius:6px;padding:.5rem .7rem;z-index:10;font-size:.8rem}
.sharePop.active{display:block}
.sharePop input{width:180px;padding:.3rem;background:#222;color:var(--text);border:1px solid #444;border-radius:4px;margin-left:.5rem}
/* LOGIN MODAL */
.modal{display:none;position:fixed;inset:0;background:#000a;z-index:100}
.modal.active{display:flex;align-items:center;justify-content:center}
.modalBox{background:var(--card);border:2px solid var(--accent);border-radius:8px;padding:1.5rem;width:300px}
.modalBox h3{margin-top:0}
.modalBox input{width:100%;padding:.5rem;margin:.4rem 0;background:#222;color:var(--text);border:1px solid #444;border-radius:4px}
.modalBox .err{color:#f55;font-size:.8rem;margin-top:.3rem}
</style>
</head>
<body>

<header>
  <h1>Official News</h1>
  <div>
    <button id="backToIndex" onclick="location.href='index.html'">‚Üê Back to main page</button>
    <span id="adminBadge">ADMIN</span>
  </div>
</header>

<main>
  <div class="feed-header">
    <h2>Live Feed</h2>
    <div>
      <button id="newPostBtn">+ New post</button>
    </div>
  </div>

  <!-- COMPOSER -->
  <section id="composer" class="composer">
    <div class="toolbar">
      <input type="color" id="fontColor" value="#ffffff" title="Text colour">
      <select id="fontSize">
        <option>12px</option><option>14px</option><option selected>16px</option>
        <option>18px</option><option>22px</option><option>28px</option>
      </select>
      <select id="fontFamily">
        <option>system-ui</option><option>Arial</option><option>Georgia</option><option>monospace</option>
      </select>
      <label title="Attach file"><input type="file" id="attach" accept="image/*,video/mp4,video/webm"></label>
    </div>
    <textarea id="editor" placeholder="What‚Äôs happening? ‚Ä¶"></textarea>
    <img class="preview" id="preview" style="display:none;">
    <div style="margin-top:.5rem;display:flex;gap:.5rem">
      <button id="publishBtn">Publish</button>
      <button id="cancelBtn">Cancel</button>
    </div>
  </section>

  <!-- FEED -->
  <section id="feed"></section>
</main>

<!-- LOGIN MODAL -->
<div id="loginModal" class="modal">
  <div class="modalBox">
    <h3>Admin login</h3>
    <input id="userInp" placeholder="Username">
    <input id="passInp" type="password" placeholder="Password">
    <div class="err" id="loginErr"></div>
    <button onclick="doLogin()">Log in</button>
    <button onclick="closeLogin()">Cancel</button>
  </div>
</div>

<script>
/* =====  DATA STORE  ===== */
let posts = JSON.parse(localStorage.getItem('newsPosts')||'[]');
let nextId = posts.length ? Math.max(...posts.map(p=>p.id))+1 : 1;
let adminMode = false;

/* =====  UTILS  ===== */
const $ = q=>document.querySelector(q);
const save = ()=> localStorage.setItem('newsPosts',JSON.stringify(posts));
const fmtDate = d=> new Date(d).toLocaleString();

/* =====  RENDER  ===== */
function renderFeed(){
  const f = $('#feed');
  f.innerHTML = posts.length ? posts.map(card).join('') : '<p style="text-align:center;color:var(--sub)">No news yet.</p>';
}
function card(p){
  const liked = (p.likes||0)>0, disliked = (p.dislikes||0)>0;
  return `
  <article class="post" data-id="${p.id}">
    <div class="head">
      <div class="avatar">N</div>
      <div>
        <div><b>Newsroom</b></div>
        <div class="meta">${fmtDate(p.date)}</div>
      </div>
    </div>
    <div class="body" style="color:${p.color||''};font-size:${p.size||''};font-family:${p.family||''}">
      ${p.text}
      ${p.media ? (p.media.video?
        `<video controls src="${p.media.url}"></video>`:
        `<img src="${p.media.url}">`) : ''}
    </div>
    <div class="actions">
      <span class="${liked?'liked':''}" onclick="like(${p.id})">‚ù§ ${p.likes||0}</span>
      <span class="${disliked?'disliked':''}" onclick="dislike(${p.id})">üëé ${p.dislikes||0}</span>
      <span onclick="toggleShare(${p.id},event)">üîó Share</span>
    </div>
    ${adminMode?`<span class="adminMenu" onclick="adminDel(${p.id})">üóë</span>`:''}
    <div class="sharePop" id="sh-${p.id}">
      <b>Link:</b><input readonly onclick="this.select()" value="${location.origin+location.pathname}#${p.id}">
    </div>
  </article>`;
}
/* =====  COMPOSER  ===== */
$('#newPostBtn').onclick = ()=> $('#composer').classList.add('active');
$('#cancelBtn').onclick = ()=> { $('#composer').classList.remove('active'); resetComposer(); };
$('#attach').onchange = e=>{
  const file = e.target.files[0];
  if(!file) return;
  const url = URL.createObjectURL(file);
  const isVid = file.type.startsWith('video');
  $('#preview').src=url; $('#preview').style.display='block';
  $('#composer').dataset.media = url;
  $('#composer').dataset.mediaType = isVid?'video':'image';
};
function resetComposer(){
  $('#editor').value='';
  $('#attach').value='';
  $('#preview').style.display='none';
  delete $('#composer').dataset.media;
}
$('#publishBtn').onclick = ()=>{
  const text = $('#editor').value.trim();
  if(!text) return;
  const post = {
    id: nextId++,
    text,
    date: Date.now(),
    color: $('#fontColor').value,
    size: $('#fontSize').value,
    family: $('#fontFamily').value,
    likes:0, dislikes:0
  };
  if($('#composer').dataset.media){
    post.media={url:$('#composer').dataset.media, video:$('#composer').dataset.mediaType=='video'};
  }
  posts.unshift(post);
  save(); resetComposer(); $('#composer').classList.remove('active'); renderFeed();
};
/* =====  LIKES / DISLIKES  ===== */
function like(id){
  const p = posts.find(x=>x.id==id);
  if(!p) return;
  p.likes = (p.likes||0)+1;
  save(); renderFeed();
}
function dislike(id){
  const p = posts.find(x=>x.id==id);
  if(!p) return;
  p.dislikes = (p.dislikes||0)+1;
  save(); renderFeed();
}
/* =====  SHARE  ===== */
function toggleShare(id,e){
  e.stopPropagation();
  const box = $(`#sh-${id}`);
  box.classList.toggle('active');
  const close = ()=> box.classList.remove('active');
  document.addEventListener('click',close,{once:true});
}
/* =====  ADMIN  ===== */
function adminDel(id){
  if(!confirm('Delete this post?')) return;
  posts = posts.filter(p=>p.id!==id);
  save(); renderFeed();
}
function openLogin(){
  $('#loginModal').classList.add('active');
  $('#userInp').focus();
}
function closeLogin(){
  $('#loginModal').classList.remove('active');
  $('#loginErr').textContent='';
}
function doLogin(){
  const u = $('#userInp').value, p = $('#passInp').value;
  if(u==='master' && p==='M4sterP@ss'){
    adminMode=true;
    $('#adminBadge').style.display='inline-block';
    closeLogin();
    renderFeed();
  } else {
    $('#loginErr').textContent='Wrong credentials.';
  }
}
/* =====  OPTIONS ON EACH POST  ===== */
window.addEventListener('contextmenu',e=>{
  const post = e.target.closest('.post');
  if(!post) return;
  e.preventDefault();
  if(adminMode) return; // already shows bin icon
  openLogin();
});
/* =====  DEEP-LINK  ===== */
if(location.hash){
  const id = parseInt(location.hash.slice(1));
  if(id) setTimeout(()=>{
    const el = $(`[data-id="${id}"]`);
    if(el){ el.style.border='2px solid var(--accent)'; el.scrollIntoView({block:'center'}); }
  },200);
}
/* =====  INIT  ===== */
renderFeed();
</script>
</body>
</html>
