<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poll Statistics Overview</title>
    <style>
     /* =========================================================
   Poll Statistics â€“ medieval parchment & iron
   ========================================================= */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Cinzel+Decorative&display=swap');

:root{
  /* --- palette --- */
  --bg:#0c0b08;                 /* almost-black parchment */
  --card:#14110e;               /* deep wood */
  --border:#4a3829;             /* old iron rust */
  --accent:#c03;                /* your crimson */
  --text:#e8dfc8;               /* aged parchment */
  --sub:#8a7d69;                /* faded ink */

  /* --- typography --- */
  --gap:1.2rem;
  font-family:"Cinzel", "Palatino Linotype", "Book Antiqua", Palatino, serif;
  font-weight:400;
  letter-spacing:.4px;
}

/* --- parchment grain --- */
body{
  margin:0;
  background:var(--bg);
  background-image:
    radial-gradient(circle at 25% 25%, #1a1612 1px, transparent 1px),
    radial-gradient(circle at 75% 75%, #1a1612 1px, transparent 1px);
  background-size:4px 4px;
  color:var(--text);
  min-height:100vh;
  display:flex;
  flex-direction:column;
}
a{color:var(--accent);text-decoration:none}

/* --- headers --- */
header,footer{
  background:var(--card);
  border-bottom:2px solid var(--accent);
  box-shadow:0 2px 6px #0006;
}
header{display:flex;align-items:center;justify-content:space-between;padding:1rem 2rem}
header h1{margin:0;font-size:1.8rem;font-family:"Cinzel Decorative",serif;letter-spacing:2px;text-shadow:1px 1px 2px #000}
header span{font-weight:300;font-size:.9rem;color:var(--sub)}
.mono{font-family:"Courier New",Courier,monospace}
.badge{display:inline-block;background:var(--accent);color:#fff;padding:.15rem .35rem;border-radius:0;font-size:.65rem;margin-left:.4rem;font-family:"Cinzel",serif}

/* --- main grid & tiles --- */
main{flex:1;padding:2rem;max-width:1100px;margin:auto;width:100%}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:var(--gap)}
.tile{
  background:linear-gradient(145deg, var(--card) 0%, #1a1612 100%);
  border:1px solid var(--border);
  border-radius:0;               /* stone-slab feel */
  padding:1.5rem 1rem;
  text-align:center;
  transition:transform .15s,box-shadow .15s;
  cursor:pointer;
  position:relative;
}
.tile:hover{transform:translateY(-3px);box-shadow:0 6px 20px #000c}
.tile h3{margin:.4rem 0 .2rem;font-size:1.1rem;font-weight:600}
.tile p{font-size:.85rem;color:var(--sub);margin:0}
footer{
  text-align:center;
  padding:1.2rem;
  font-size:.8rem;
  color:var(--sub);
  border-bottom:none;
  border-top:2px solid var(--accent);
}

/* --- poll specific --- */
.poll-item{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:0;
  padding:1.5rem;
  margin-bottom:1rem;
  box-shadow:0 2px 4px #0004;
}
.poll-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}
.poll-title{font-size:1.3rem;font-weight:bold;color:var(--accent);font-family:"Cinzel",serif}
.poll-date{color:var(--sub);font-size:.9rem}
.option-result{background:#111;padding:.8rem;margin:.5rem 0;border-left:3px solid var(--accent)}
.option-header{display:flex;justify-content:space-between;margin-bottom:.3rem}
.progress-bar{background:#222;height:6px;border-radius:0;overflow:hidden}
.progress-fill{background:var(--accent);height:100%;transition:width .3s ease}
.stats-section{background:var(--card);border:1px solid var(--border);border-radius:0;padding:2rem;margin:2rem 0}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem}
.stat-card{background:#111;padding:1rem;border-radius:0;text-align:center}
.stat-value{font-size:1.8rem;font-weight:bold;color:var(--accent);font-family:"Cinzel",serif}
.stat-label{color:var(--sub);font-size:.8rem;margin-top:.3rem}
.fun-facts{background:#0a0a0a;border:1px dashed var(--accent);border-radius:0;padding:1.5rem;margin:2rem 0}
.fact-item{display:flex;align-items:center;gap:1rem;margin:.8rem 0;padding:.5rem;background:#111;border-radius:0}
.fact-icon{font-size:1.5rem}
    </style>
</head>
<body>
    <header>
        <h1>POLL STATISTICS <span>overview</span></h1>
        <span class="mono">// hard-coded data vault</span>
    </header>

    <main>
        <!-- Fun Facts Section -->
        <div class="fun-facts">
            <h2 style="margin-top:0;color:var(--accent)">ðŸ“Š FUN FACTS</h2>
            <div id="funFactsContainer"></div>
        </div>

        <!-- Overall Statistics -->
        <div class="stats-section">
            <h2>OVERALL STATISTICS</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value" id="totalPolls">0</div>
                    <div class="stat-label">TOTAL POLLS</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalVotes">0</div>
                    <div class="stat-label">TOTAL VOTES</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgVotesPerPoll">0</div>
                    <div class="stat-label">AVG VOTES/POLL</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="mostPopularOption">-</div>
                    <div class="stat-label">MOST VOTED OPTION</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="mostActivePoll">-</div>
                    <div class="stat-label">MOST ACTIVE POLL</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="leastActivePoll">-</div>
                    <div class="stat-label">LEAST ACTIVE POLL</div>
                </div>
            </div>
        </div>

        <!-- Individual Poll Results -->
        <div id="pollsList"></div>
    </main>

    <footer>
        poll statistics vault
    </footer>

    <script>
       // HARD-CODED POLLS - EDIT THIS SECTION TO ADD/MODIFY POLLS
const POLLS = [
    {
        id: "poll_001",
        title: "Should we have a permanent Lord of Alter Hafen? If so, who should it be? (Only Lord of Alter Hafen himself could transfer his title.)",
        date: "2025-02-11",
        options: [
            { text: "MineKid", votes: 2 },
            { text: "King Adam", votes: 0 },
            { text: "Dwayne", votes: 1 },
            { text: "Not a permanent position", votes: 0 }
        ]
    }
    // <-- You can add more polls here, separated by commas
];
        // Calculate statistics
        function calculateStats() {
            const stats = {
                totalPolls: POLLS.length,
                totalVotes: 0,
                mostPopularOption: { name: '', votes: 0 },
                mostActivePoll: { name: '', votes: 0 },
                leastActivePoll: { name: '', votes: Infinity },
                allOptions: []
            };

            POLLS.forEach(poll => {
                const pollTotal = poll.options.reduce((sum, opt) => sum + opt.votes, 0);
                stats.totalVotes += pollTotal;

                // Check most active poll
                if (pollTotal > stats.mostActivePoll.votes) {
                    stats.mostActivePoll = { name: poll.title, votes: pollTotal };
                }

                // Check least active poll
                if (pollTotal < stats.leastActivePoll.votes) {
                    stats.leastActivePoll = { name: poll.title, votes: pollTotal };
                }

                // Check individual options
                poll.options.forEach(option => {
                    stats.allOptions.push({ name: option.text, votes: option.votes, poll: poll.title });
                    if (option.votes > stats.mostPopularOption.votes) {
                        stats.mostPopularOption = { name: option.text, votes: option.votes };
                    }
                });
            });

            stats.avgVotesPerPoll = Math.round(stats.totalVotes / stats.totalPolls);
            
            return stats;
        }

        // Generate fun facts
        function generateFunFacts(stats) {
            const facts = [
                { icon: 'ðŸ‘‘', text: `Most voted option ever: <strong>${stats.mostPopularOption.name}</strong> with ${stats.mostPopularOption.votes} votes` },
                { icon: 'ðŸ”¥', text: `Most active poll: <strong>${stats.mostActivePoll.name}</strong> (${stats.mostActivePoll.votes} total votes)` },
                { icon: 'ðŸ˜´', text: `Least active poll: <strong>${stats.leastActivePoll.name}</strong> (${stats.leastActivePoll.votes} total votes)` },
                { icon: 'ðŸ“Š', text: `Average votes per poll: <strong>${stats.avgVotesPerPoll}</strong>` },
                { icon: 'ðŸŽ¯', text: `Total options across all polls: <strong>${stats.allOptions.length}</strong>` }
            ];

            // Add unique facts
            const uniqueVoters = Math.floor(stats.totalVotes * 0.7); // Simulated
            facts.push({ icon: 'ðŸ‘¥', text: `Estimated unique voters: <strong>${uniqueVoters}</strong>` });

            // Find option that appeared in multiple polls
            const optionCounts = {};
            stats.allOptions.forEach(opt => {
                optionCounts[opt.name] = (optionCounts[opt.name] || 0) + 1;
            });
            
            const multiPollOptions = Object.entries(optionCounts).filter(([_, count]) => count > 1);
            if (multiPollOptions.length > 0) {
                facts.push({ 
                    icon: 'ðŸ”„', 
                    text: `Options appearing in multiple polls: ${multiPollOptions.map(([name, count]) => `<strong>${name}</strong> (${count}x)`).join(', ')}` 
                });
            }

            return facts;
        }

        // Render everything
        function render() {
            const stats = calculateStats();
            const funFacts = generateFunFacts(stats);

            // Update statistics
            document.getElementById('totalPolls').textContent = stats.totalPolls;
            document.getElementById('totalVotes').textContent = stats.totalVotes.toLocaleString();
            document.getElementById('avgVotesPerPoll').textContent = stats.avgVotesPerPoll;
            document.getElementById('mostPopularOption').textContent = stats.mostPopularOption.name;
            document.getElementById('mostActivePoll').textContent = stats.mostActivePoll.name;
            document.getElementById('leastActivePoll').textContent = stats.leastActivePoll.name;

            // Render fun facts
            const factsContainer = document.getElementById('funFactsContainer');
            factsContainer.innerHTML = funFacts.map(fact => `
                <div class="fact-item">
                    <span class="fact-icon">${fact.icon}</span>
                    <span>${fact.text}</span>
                </div>
            `).join('');

            // Render polls
            const pollsList = document.getElementById('pollsList');
            pollsList.innerHTML = POLLS.map(poll => {
                const totalVotes = poll.options.reduce((sum, opt) => sum + opt.votes, 0);
                const maxVotes = Math.max(...poll.options.map(o => o.votes));
                
                return `
                    <div class="poll-item">
                        <div class="poll-header">
                            <div class="poll-title">${poll.title}</div>
                            <div class="poll-date">${new Date(poll.date).toLocaleDateString()}</div>
                        </div>
                        
                        <div style="margin-bottom:1rem;color:var(--sub);font-size:.9rem">
                            Total votes: ${totalVotes.toLocaleString()}
                        </div>
                        
                        ${poll.options.map(option => {
                            const percentage = totalVotes > 0 ? (option.votes / totalVotes * 100).toFixed(1) : 0;
                            const isWinner = option.votes === maxVotes && totalVotes > 0;
                            
                            return `
                                <div class="option-result">
                                    <div class="option-header">
                                        <span>
                                            ${option.text} 
                                            ${isWinner ? '<span class="badge">WINNER</span>' : ''}
                                        </span>
                                        <span style="color:var(--sub);font-size:.8rem">
                                            ${option.votes} votes â€¢ ${percentage}%
                                        </span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: ${percentage}%"></div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
            }).join('');
        }

        // Initialize
        render();
    </script>
</body>
</html>
