<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Archive ‚Äì Old Polls</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìÅ</text></svg>">
<style>
:root{--bg:#111;--text:#fff;--sub:#999;--blue:#00b4ff;--radius:4px;
      --font:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;}
body{margin:0;background:var(--bg);color:var(--text);font-family:var(--font);padding:2rem}
h1{border-bottom:2px solid var(--blue);padding-bottom:.5rem}
table{width:100%;border-collapse:collapse;margin-top:1rem}
th,td{padding:.5rem;text-align:left;border-bottom:1px solid #333}
th{color:var(--blue)}
a{color:var(--blue)}
</style>
</head>
<body>
<h1>Vote Archive</h1>
<p><a href="vote.html">‚Üê back to voting page</a></p>
<table id="list"></table>

<script type="module">
import { db, collection, getDocs } from './firebase-config.js';

const list = document.getElementById('list');
list.innerHTML='<tr><th>Title</th><th>Closed</th><th>Yes</th><th>No</th></tr>';

const snap = await getDocs(collection(db,'archive'));
snap.docs.sort((a,b)=> b.data().archivedAt - a.data().archivedAt)
         .forEach(d=>{
           const e = d.data();
           const tr = document.createElement('tr');
           tr.innerHTML = `
             <td>${e.title}</td>
             <td>${new Date(e.archivedAt).toLocaleString()}</td>
             <td>${e.results.yes}</td>
             <td>${e.results.no}</td>`;
           list.appendChild(tr);
         });
</script>
</body>
</html>
